import os
import time

def limpiar_pantalla():
    os.system('cls' if os.name == 'nt' else 'clear')

def mostrar_menu():
    print("=" * 60)
    print("       TUTORIAL - MANEJO DE FICHEROS EN PYTHON")
    print("=" * 60)
    print("\n1. M√©todos de Apertura de Archivos")
    print("2. M√©todo READ y READLINES")
    print("3. M√©todo WRITE y SEEK")
    print("4. M√©todo WRITELINES")
    print("5. Manejo de Excepciones")
    print("6. Salir")
    print("\n" + "=" * 60)

def tutorial_apertura_archivos():
    limpiar_pantalla()
    print("üìÇ M√âTODOS DE APERTURA DE ARCHIVOS")
    print("=" * 50)
    
    # Crear carpeta de demostraci√≥n
    os.makedirs("TutorialFicheros", exist_ok=True)
    
    print("\n1. Modo 'r' (lectura)")
    print("   Abre el archivo para lectura. Si no existe, da error.")
    
    # Demostraci√≥n con try-except para evitar errores
    try:
        with open("TutorialFicheros/archivo_r.txt", "r") as f:
            contenido = f.read()
    except FileNotFoundError:
        print("   ‚ùå Error: El archivo no existe (comportamiento esperado)")
    
    print("\n2. Modo 'w' (escritura)")
    print("   Crea el archivo o lo sobrescribe si existe.")
    
    with open("TutorialFicheros/archivo_w.txt", "w") as f:
        f.write("Contenido creado con modo 'w'")
    print("   ‚úÖ Archivo creado: TutorialFicheros/archivo_w.txt")
    
    print("\n3. Modo 'a' (anexar)")
    print("   A√±ade contenido al final del archivo.")
    
    with open("TutorialFicheros/archivo_a.txt", "a") as f:
        f.write("L√≠nea 1 - a√±adida con modo 'a'\n")
        f.write("L√≠nea 2 - a√±adida despu√©s\n")
    print("   ‚úÖ Contenido a√±adido: TutorialFicheros/archivo_a.txt")
    
    print("\n4. Modo 'r+' (lectura y escritura)")
    print("   Permite leer y escribir desde el principio.")
    
    with open("TutorialFicheros/archivo_r+.txt", "w") as f:
        f.write("Contenido inicial\n")
    
    with open("TutorialFicheros/archivo_r+.txt", "r+") as f:
        contenido = f.read()
        f.write("Texto a√±adido con r+\n")
    print("   ‚úÖ Archivo modificado: TutorialFicheros/archivo_r+.txt")
    
    input("\nüìç Presiona Enter para continuar...")

def tutorial_read_readlines():
    limpiar_pantalla()
    print("üìñ M√âTODOS READ Y READLINES")
    print("=" * 50)
    
    # Crear archivo de ejemplo
    with open("TutorialFicheros/ejemplo_lectura.txt", "w") as f:
        f.write("L√≠nea 1: M√©todo read() lee todo el contenido\n")
        f.write("L√≠nea 2: M√©todo readlines() devuelve lista\n")
        f.write("L√≠nea 3: readlines mantiene los saltos de l√≠nea\n")
        f.write("L√≠nea 4: √öltima l√≠nea del archivo\n")
    
    print("\nüìÑ Contenido del archivo creado:")
    print("‚îÄ" * 40)
    with open("TutorialFicheros/ejemplo_lectura.txt", "r") as f:
        print(f.read())
    
    print("\n1. M√âTODO READ()")
    print("   Lee todo el contenido como una sola cadena:")
    with open("TutorialFicheros/ejemplo_lectura.txt", "r") as f:
        contenido = f.read()
        print(f"   Tipo: {type(contenido)}")
        print(f"   Longitud: {len(contenido)} caracteres")
        print(f"   Primeros 50 chars: {contenido[:50]}...")
    
    print("\n2. M√âTODO READLINES()")
    print("   Lee el contenido como lista de l√≠neas:")
    with open("TutorialFicheros/ejemplo_lectura.txt", "r") as f:
        lineas = f.readlines()
        print(f"   Tipo: {type(lineas)}")
        print(f"   N√∫mero de l√≠neas: {len(lineas)}")
        print(f"   Primera l√≠nea: {repr(lineas[0])}")
    
    print("\n3. DIFERENCIA ENTRE READ Y READLINES")
    print("   read(): Una sola cadena con todo el contenido")
    print("   readlines(): Lista donde cada elemento es una l√≠nea")
    
    input("\nüìç Presiona Enter para continuar...")

def tutorial_write_seek():
    limpiar_pantalla()
    print("‚úèÔ∏è M√âTODOS WRITE Y SEEK")
    print("=" * 50)
    
    # Crear archivo inicial
    with open("TutorialFicheros/ejemplo_seek.txt", "w") as f:
        f.write("L√≠nea original 1\n")
        f.write("L√≠nea original 2\n")
        f.write("L√≠nea original 3\n")
    
    print("üìÑ Archivo original:")
    with open("TutorialFicheros/ejemplo_seek.txt", "r") as f:
        print(f.read())
    
    print("\n1. WRITE AL FINAL (comportamiento por defecto)")
    with open("TutorialFicheros/ejemplo_seek.txt", "r+") as f:
        contenido = f.read()
        f.write("Texto a√±adido al final\n")
    
    print("   ‚úÖ Texto a√±adido al final")
    
    print("\n2. USO DE SEEK() PARA ESCRIBIR AL PRINCIPIO")
    with open("TutorialFicheros/ejemplo_seek.txt", "r+") as f:
        contenido = f.read()
        f.seek(0, 0)  # Ir al principio
        f.write("TEXTO AL PRINCIPIO\\n")
        f.write(contenido)
    
    print("   ‚úÖ Texto insertado al principio")
    
    print("\n3. PAR√ÅMETROS DE SEEK()")
    print("   seek(offset, whence)")
    print("   - offset: bytes a desplazar")
    print("   - whence: 0=inicio, 1=actual, 2=final")
    
    print("\n   Ejemplos:")
    print("   - seek(0): Ir al inicio")
    print("   - seek(0, 2): Ir al final") 
    print("   - seek(10): Ir al byte 10 desde inicio")
    
    print("\nüìÑ Archivo modificado:")
    with open("TutorialFicheros/ejemplo_seek.txt", "r") as f:
        print(f.read())
    
    input("\nüìç Presiona Enter para continuar...")

def tutorial_writelines():
    limpiar_pantalla()
    print("üìù M√âTODO WRITELINES")
    print("=" * 50)
    
    # Crear lista como en el PDF p√°gina 5
    lista_lineas = [
        "Primera l√≠nea creada con writelines\n",
        "Segunda l√≠nea de la lista\n", 
        "Tercera l√≠nea con salto de l√≠nea incluido\n"
    ]
    
    print("üìã Lista a escribir:")
    for i, linea in enumerate(lista_lineas, 1):
        print(f"   {i}. {repr(linea)}")
    
    print("\n1. ESCRITURA CON WRITELINES")
    with open("TutorialFicheros/ejemplo_writelines.txt", "w") as f:
        f.writelines(lista_lineas)
    
    print("   ‚úÖ Archivo creado con writelines")
    
    print("\n2. CONTENIDO RESULTANTE:")
    with open("TutorialFicheros/ejemplo_writelines.txt", "r") as f:
        contenido = f.read()
        print(contenido)
    
    print("3. COMPARACI√ìN CON WRITE:")
    print("   - write(): Escribe una cadena")
    print("   - writelines(): Escribe una lista de cadenas")
    
    input("\nüìç Presiona Enter para continuar...")

def tutorial_excepciones():
    limpiar_pantalla()
    print("üö® MANEJO DE EXCEPCIONES")
    print("=" * 50)
    
    print("\n1. SIN MANEJO DE EXCEPCIONES:")
    print("   Si intentamos abrir un archivo que no existe...")
    
    # Esto causar√≠a un error, pero lo controlamos
    try:
        with open("archivo_inexistente.txt", "r") as f:
            contenido = f.read()
    except FileNotFoundError as e:
        print(f"   ‚ùå Error: {e}")
    
    print("\n2. CON MANEJO DE EXCEPCIONES")
    print("   Usando try...except FileNotFoundError:")
    
    nombre_fichero = "archivo_que_no_existe.txt"
    try:
        with open(nombre_fichero, 'r') as f:
            print(f.read())
    except FileNotFoundError:
        print('   ‚úÖ Mensaje controlado: No existe el fichero')
    
    print("\n3. EJEMPLO COMPLETO COMO EN EL PDF:")
    
    # Crear archivo como en el ejemplo del PDF
    with open("TutorialFicheros/archivotext.txt", "w") as f:
        f.write("Probando excepciones")
    
    # Intentar abrir archivo que S√ç existe
    print("\n   Caso: Archivo EXISTE")
    nombre_fichero = "TutorialFicheros/archivotext.txt"
    try:
        with open(nombre_fichero, 'r') as f:
            print(f"   ‚úÖ Contenido: {f.read()}")
    except FileNotFoundError:
        print('   No existe el fichero')
    
    # Intentar abrir archivo que NO existe  
    print("\n   Caso: Archivo NO EXISTE")
    nombre_fichero = "TutorialFicheros/archivo_inexistente.txt"
    try:
        with open(nombre_fichero, 'r') as f:
            print(f.read())
    except FileNotFoundError:
        print('   ‚úÖ No existe el fichero (manejado correctamente)')
    
    input("\nüìç Presiona Enter para continuar...")

def main():
    while True:
        limpiar_pantalla()
        mostrar_menu()
        
        try:
            opcion = input("\nSelecciona una opci√≥n (1-6): ").strip()
            
            if opcion == "1":
                tutorial_apertura_archivos()
            elif opcion == "2":
                tutorial_read_readlines()
            elif opcion == "3":
                tutorial_write_seek()
            elif opcion == "4":
                tutorial_writelines()
            elif opcion == "5":
                tutorial_excepciones()
            elif opcion == "6":
                print("\n¬°Gracias por usar el tutorial de manejo de ficheros!")
                print("Archivos de ejemplo generados en la carpeta: TutorialFicheros/")
                break
            else:
                print("‚ùå Opci√≥n no v√°lida. Por favor, selecciona 1-6.")
                time.sleep(1)
                
        except KeyboardInterrupt:
            print("\n\nüëã ¬°Hasta pronto!")
            break

if __name__ == "__main__":
    # Crear carpeta para los ejemplos
    os.makedirs("TutorialFicheros", exist_ok=True)
    main()